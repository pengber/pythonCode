第四章 C 4.3 通过selenium 模拟浏览器抓取/**/ typeof jQuery1124017588431462406384_1563448497284 === 'function' && jQuery1124017588431462406384_1563448497284({"results":{"parents":[{"replySeq":38182263,"name":"\厦","memberId":"UID_D327B81729936096FE7D026E947CE848","memberIcon":"http://thirdqq.qlogo.cn/g?b=oidb&k=PicBRyj2BaHcfyK4K5bfWtg&s=100&t=1557482014","memberUrl":"https://qq.com/","memberDomain":"qq","good":0,"bad":0,"police":0,"parentSeq":38182263,"directSeq":0,"shortUrl":null,"title":"Hello world!","site":"http://www.santostang.com/2018/07/04/hello-world/","email":null,"ipAddress":"180.111.212.96","isMobile":"0","agent":"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36","septSns":null,"targetService":null,"targetUserName":null,"info1":null,"info2":null,"info3":null,"image1":null,"image2":null,"image3":null,"link1":null,"link2":null,"link3":null,"isSecret":0,"isModified":0,"confirm":0,"subCount":0,"regdate":"2019-07-16T05:19:50.000Z","deletedDate":null,"file1":null,"file2":null,"file3":null,"additionalSeq":0,"content":"2019.7.16 Test","quotationSeq":null,"quotationContent":null,"consumerSeq":1020,"livereSeq":28583,"repSeq":4272904,"memberGroupSeq":31049466,"memberSeq":31588294,"status":0,"repGroupSeq":0,"adminSeq":25413747,"deleteReason":null,"sticker":0,"version":null},{"replySeq":38172135,"name":"蝉","memberId":"UID_8756BF0E9B92F76B099263DBDB4CCAD1","memberIcon":"http://thirdqq.qlogo.cn/g?b=oidb&k=XbUmVtoIHdTKsHQMZI71Zw&s=100&t=1556982380","memberUrl":"https://qq.com/","memberDomain":"qq","good":0,"bad":0,"police":0,"parentSeq":38172135,"directSeq":0,"shortUrl":null,"title":"Hello world!","site":"http://www.santostang.com/2018/07/04/hello-world/","email":null,"ipAddress":"219.150.33.66","isMobile":"0","agent":"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36","septSns":null,"targetService":null,"targetUserName":null,"info1":null,"info2":null,"info3":null,"image1":null,"image2":null,"image3":null,"link1":null,"link2":null,"link3":null,"isSecret":0,"isModified":0,"confirm":0,"subCount":0,"regdate":"2019-07-15T06:55:26.000Z","deletedDate":null,"file1":null,"file2":null,"file3":null,"additionalSeq":0,"content":"2019.07.15 Test","quotationSeq":null,"quotationContent":null,"consumerSeq":1020,"livereSeq":28583,"repSeq":4272904,"memberGroupSeq":31043453,"memberSeq":31582239,"status":0,"repGroupSeq":0,"adminSeq":25413747,"deleteReason":null,"sticker":0,"version":null},{"replySeq":38170948,"name":"nekocyan","memberId":"UID_6B99B9870B5BD69A73E05076C8EA3677","memberIcon":"http://thirdqq.qlogo.cn/g?b=oidb&k=fic7JmSic7udrj9TslvVqNGg&s=100&t=1558389960","memberUrl":"https://qq.com/","memberDomain":"qq","good":0,"bad":0,"police":0,"parentSeq":38170948,"directSeq":0,"shortUrl":null,"title":"Hello world!","site":"http://www.santostang.com/2018/07/04/hello-world/","email":null,"ipAddress":"112.17.241.25","isMobile":"0","agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36","septSns":null,"targetService":null,"targetUserName":null,"info1":null,"info2":null,"info3":null,"image1":null,"image2":null,"image3":null,"link1":null,"link2":null,"link3":null,"isSecret":0,"isModified":0,"confirm":0,"subCount":0,"regdate":"2019-07-15T05:14:42.000Z","deletedDate":null,"file1":null,"file2":null,"file3":null,"additionalSeq":0,"content":"2019.07.15 test","quotationSeq":null,"quotationContent":null,"consumerSeq":1020,"livereSeq":28583,"repSeq":4272904,"memberGroupSeq":31042707,"memberSeq":31581487,"status":0,"repGroupSeq":0,"adminSeq":25413747,"deleteReason":null,"sticker":0,"version":null},{"replySeq":38165730,"name":"Y小疯、","memberId":"UID_B7480AB93ABA2F9C33FF19F87CB64939","memberIcon":"http://thirdqq.qlogo.cn/g?b=oidb&k=EVK5ZGqNtpviaDPmzoT8BHg&s=100&t=1557145419","memberUrl":"https://qq.com/","memberDomain":"qq","good":0,"bad":0,"police":0,"parentSeq":38165730,"directSeq":0,"shortUrl":null,"title":"Hello world!","site":"http://www.santostang.com/2018/07/04/hello-world/","email":null,"ipAddress":"60.223.247.124","isMobile":"0","agent":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36","septSns":null,"targetService":null,"targetUserName":null,"info1":null,"info2":null,"info3":null,"image1":null,"image2":null,"image3":null,"link1":null,"link2":null,"link3":null,"isSecret":0,"isModified":0,"confirm":0,"subCount":0,"regdate":"2019-07-14T11:10:38.000Z","deletedDate":null,"file1":null,"file2":null,"file3":null,"additionalSeq":0,"content":"2019.7.14.test","quotationSeq":null,"quotationContent":null,"consumerSeq":1020,"livereSeq":28583,"repSeq":4272904,"memberGroupSeq":31038712,"memberSeq":31577436,"status":0,"repGroupSeq":0,"adminSeq":25413747,"deleteReason":null,"sticker":0,"version":null},{"replySeq":38072205,"name":"lone pair","memberId":"UID_70D5B3A11007A724BB19686E496C5373","memberIcon":"http://thirdqq.qlogo.cn/g?b=oidb&k=Y5lPvq7VmbDO8UBEw2Yfgw&s=100","memberUrl":"https://qq.com/","memberDomain":"qq","good":0,"bad":0,"police":0,"parentSeq":38072205,"directSeq":0,"shortUrl":null,"title":"Hello world!","site":"http://www.santostang.com/2018/07/04/hello-world/","email":null,"ipAddress":"112.32.14.180","isMobile":"0","agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36","septSns":null,"targetService":null,"targetUserName":null,"info1":null,"info2":null,"info3":null,"image1":null,"image2":null,"image3":null,"link1":null,"link2":null,"link3":null,"isSecret":0,"isModified":0,"confirm":0,"subCount":0,"regdate":"2019-07-02T08:53:46.000Z","deletedDate":null,"file1":null,"file2":null,"file3":null,"additionalSeq":0,"content":"testing","quotationSeq":null,"quotationContent":null,"consumerSeq":1020,"livereSeq":28583,"repSeq":4272904,"memberGroupSeq":30973832,"memberSeq":31511883,"status":0,"repGroupSeq":0,"adminSeq":25413747,"deleteReason":null,"sticker":0,"version":null},{"replySeq":38066640,"name":"火","memberId":"oBVoaxI9np0EcCDA47XYGVpysfPE","memberIcon":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoerFIhJeibIwOkibcHRcrZRTUtdfibFa06Xbrgyysb6Md5cowvj3CIINsibhWicLia6IibkxriagfjzoDaLA/132","memberUrl":"http://www.wechat.com","memberDomain":"wechat","good":0,"bad":0,"police":0,"parentSeq":38066640,"directSeq":0,"shortUrl":null,"title":"Hello world!","site":"http://www.santostang.com/2018/07/04/hello-world/","email":null,"ipAddress":"121.225.249.225","isMobile":"0","agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36","septSns":null,"targetService":null,"targetUserName":null,"info1":null,"info2":null,"info3":null,"image1":null,"image2":null,"image3":null,"link1":null,"link2":null,"link3":null,"isSecret":0,"isModified":0,"confirm":0,"subCount":0,"regdate":"2019-07-01T14:48:08.000Z","deletedDate":null,"file1":null,"file2":null,"file3":null,"additionalSeq":0,"content":"test","quotationSeq":null,"quotationContent":null,"consumerSeq":1020,"livereSeq":28583,"repSeq":4272904,"memberGroupSeq":30969996,"memberSeq":31507995,"status":0,"repGroupSeq":0,"adminSeq":25413747,"deleteReason":null,"sticker":0,"version":null},{"replySeq":38051778,"name":"苏宝龙","memberId":"oBVoaxJhG4Bpg5csI-ppdxe4cOiA","memberIcon":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoSO78cqOPJGAlYKYVtKUUCqjEbHeSBzM3yWibKqnplv8Ln9MN06B6Qzj6A9EInrDAV4Oz1as6hMnw/132","memberUrl":"http://www.wechat.com","memberDomain":"wechat","good":0,"bad":0,"police":0,"parentSeq":38051778,"directSeq":0,"shortUrl":null,"title":"Hello world!","site":"http://www.santostang.com/2018/07/04/hello-world/","email":null,"ipAddress":"27.115.86.106","isMobile":"0","agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:67.0) Gecko/20100101 Firefox/67.0","septSns":null,"targetService":null,"targetUserName":null,"info1":null,"info2":null,"info3":null,"image1":null,"image2":null,"image3":null,"link1":null,"link2":null,"link3":null,"isSecret":0,"isModified":0,"confirm":0,"subCount":0,"regdate":"2019-06-29T02:00:25.000Z","deletedDate":null,"file1":null,"file2":null,"file3":null,"additionalSeq":0,"content":"test   demo。。。。。。。。。。。。。。。。","quotationSeq":null,"quotationContent":null,"consumerSeq":1020,"livereSeq":28583,"repSeq":4272904,"memberGroupSeq":30957365,"memberSeq":31495212,"status":0,"repGroupSeq":0,"adminSeq":25413747,"deleteReason":null,"sticker":0,"version":null},{"replySeq":37684295,"name":"风宇者","memberId":"oBVoaxKuZfl_rAbgoRqRXdGKK4Pw","memberIcon":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epXHLm9icdEzOibBmbzRT9NJbD4OtfIGVjY0gprLoftUu3SJxk6ImZyXBhffYRQjuxXibQyFgHqTAiaqw/132","memberUrl":"http://www.wechat.com","memberDomain":"wechat","good":0,"bad":0,"police":0,"parentSeq":37684295,"directSeq":0,"shortUrl":null,"title":"Hello world!","site":"http://www.santostang.com/2018/07/04/hello-world/","email":null,"ipAddress":"125.82.23.76","isMobile":"0","agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:66.0) Gecko/20100101 Firefox/66.0","septSns":null,"targetService":null,"targetUserName":null,"info1":null,"info2":null,"info3":null,"image1":null,"image2":null,"image3":null,"link1":null,"link2":null,"link3":null,"isSecret":0,"isModified":0,"confirm":0,"subCount":1,"regdate":"2019-05-12T11:38:09.000Z","deletedDate":null,"file1":null,"file2":null,"file3":null,"additionalSeq":0,"content":"简直有毒，这段代码有时候可以执行，有时候又失效了\nfrom selenium import webdriver\ndriver = webdriver.Firefox(executable_path = r'C:/Users/Administrator/Desktop/geckodriver.exe')\ndriver.get('http://www.santostang.com/2018/07/04/hello-world/')\ndriver.switch_to.frame(driver.find_element_by_css_selector(\"iframe[title='livere']\"))\ncomment = driver.find_element_by_css_selector('div.reply-content')\ncontent = comment.find_element_by_tag_name('p')\nprint (content.text)","quotationSeq":null,"quotationContent":null,"consumerSeq":1020,"livereSeq":28583,"repSeq":4272904,"memberGroupSeq":30670438,"memberSeq":31201599,"status":0,"repGroupSeq":0,"adminSeq":25413747,"deleteReason":null,"sticker":0,"version":null},{"replySeq":37654725,"name":"周前","memberId":"oBVoaxMv4rc7XjOhokOgNjPd5NDI","memberIcon":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIqibK6o5uYLBLyBRBwSL5UpUZGH6w0mnib1qZafX3v2VLKXcUCbT14pdiaU2b84gPfRdo5M3lvrM2dA/132","memberUrl":"http://www.wechat.com","memberDomain":"wechat","good":0,"bad":0,"police":0,"parentSeq":37654725,"directSeq":0,"shortUrl":null,"title":"Hello world!","site":"http://www.santostang.com/2018/07/04/hello-world/","email":null,"ipAddress":"202.120.235.51","isMobile":"0","agent":"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.106 BIDUBrowser/8.7 Safari/537.36","septSns":null,"targetService":null,"targetUserName":null,"info1":null,"info2":null,"info3":null,"image1":null,"image2":null,"image3":null,"link1":null,"link2":null,"link3":null,"isSecret":0,"isModified":0,"confirm":0,"subCount":0,"regdate":"2019-05-08T09:40:54.000Z","deletedDate":null,"file1":null,"file2":null,"file3":null,"additionalSeq":0,"content":"捣鼓了半天，终于把4.3弄出来了。有一些经验分享一下：（主要是第一个的问题，搞了很久，安装卸载程序好几次）\n一个是Firefox的版本和Selenium的版本的问题。我最后安装的是Firefox的v55，然后Selenium装的是v3.5.0，因此geckodriver的版本也不是最新版（这个可以去它的官网上看，会说明适用什么版本的），这样就不会出现老师所说的还要补充自己电脑中geckodriver.exe程序的地址的步骤（我觉得这样会方便一点）。其实各个版本的对应关系还有很多，大家可以百度哈（我都是各种百度后解决的）\n二是4.3中for循环中，有一行忘记缩进了（这个很明显哈，大家看到就知道了）","quotationSeq":null,"quotationContent":null,"consumerSeq":1020,"livereSeq":28583,"repSeq":4272904,"memberGroupSeq":30646147,"memberSeq":31177066,"status":0,"repGroupSeq":0,"adminSeq":25413747,"deleteReason":null,"sticker":0,"version":null},{"replySeq":37633263,"name":"百姓之心","memberId":"UID_01059ED11774603C0550D8F21A01A19B","memberIcon":"http://thirdqq.qlogo.cn/g?b=oidb&k=oicRc9PuAMWiaKaCms9vb3zw&s=100","memberUrl":"https://qq.com/","memberDomain":"qq","good":0,"bad":0,"police":0,"parentSeq":37633263,"directSeq":0,"shortUrl":null,"title":"Hello world!","site":"http://www.santostang.com/2018/07/04/hello-world/","email":null,"ipAddress":"223.72.163.130","isMobile":"0","agent":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.221 Safari/537.36 SE 2.X MetaSr 1.0","septSns":null,"targetService":null,"targetUserName":null,"info1":null,"info2":null,"info3":null,"image1":null,"image2":null,"image3":null,"link1":null,"link2":null,"link3":null,"isSecret":0,"isModified":0,"confirm":0,"subCount":0,"regdate":"2019-05-05T09:35:39.000Z","deletedDate":null,"file1":null,"file2":null,"file3":null,"additionalSeq":0,"content":"谢谢老师，开始学习","quotationSeq":null,"quotationContent":null,"consumerSeq":1020,"livereSeq":28583,"repSeq":4272904,"memberGroupSeq":30627564,"memberSeq":31158269,"status":0,"repGroupSeq":0,"adminSeq":25413747,"deleteReason":null,"sticker":0,"version":null}],"children":[{"replySeq":37706505,"name":"Qiuo","memberId":"UID_B05EDB3B7E77540145AD7B345F244C7C","memberIcon":"http://thirdqq.qlogo.cn/g?b=oidb&k=1leX7aeFfuhIuw8OTsmEdA&s=100","memberUrl":"https://qq.com/","memberDomain":"qq","good":0,"bad":0,"police":0,"parentSeq":37684295,"directSeq":37684295,"shortUrl":null,"title":"Hello world!","site":"http://www.santostang.com/2018/07/04/hello-world/","email":null,"ipAddress":"211.103.115.57","isMobile":"0","agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:66.0) Gecko/20100101 Firefox/66.0","septSns":null,"targetService":null,"targetUserName":null,"info1":null,"info2":null,"info3":null,"image1":null,"image2":null,"image3":null,"link1":null,"link2":null,"link3":null,"isSecret":0,"isModified":0,"confirm":0,"subCount":0,"regdate":"2019-05-15T06:29:57.000Z","deletedDate":null,"file1":null,"file2":null,"file3":null,"additionalSeq":0,"content":"感觉是因为网速不够快没加载出来程序就提取了，应该让他睡几秒。","quotationSeq":null,"quotationContent":null,"consumerSeq":1020,"livereSeq":28583,"repSeq":4272904,"memberGroupSeq":30665001,"memberSeq":31196106,"status":0,"repGroupSeq":0,"adminSeq":25413747,"deleteReason":null,"sticker":0,"version":null}],"quotations":[]},"resultCode":200,"resultMessage":"Okay, livere"});